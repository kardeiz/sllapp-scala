@( schedule: Schedule)(implicit context: MainServlet)

@import context._
@import Models._

@quickPickForm = {
  <form method="GET">
    <div class="form-group">
      <label for="resource_id" class="control-label">Please select a resource</label>
      <select name="resource_id" class="form-control">
        @for( r <- Resource.all ) {
          @if( r.id == params.get("resource_id") ) {
            <option value="@r.id.get" selected="selected">@r.name</option>
          } else {
            <option value="@r.id.get">@r.name</option>
          }
        }
      </select>
    </div>
    <div class="form-group">
      <label for="date" class="control-label">... and a date</label>
      <input id="datepicker" name="date" class="form-control" type="text" value="@schedule.date.toString(Schedule.formatDate)"/>
    </div>
    <div class="form-group">
      <button class="btn btn-primary">Go</button>
    </div>
  </form>
}

@layouts.html.default("Available reservations") {
  @if( schedule.optResource.isEmpty ) {
    <div class="row">
      <div class="col-sm-4 col-sm-offset-4">
        @quickPickForm
      </div>
    </div>
  } else {
    <div class="row">
      <div class="col-sm-4">
        @quickPickForm
      </div>
      <div class="col-sm-4">
        <form method="POST" action="@url(reservationsPost)">
          <input type="hidden" name="resource_id" value="@schedule.optResource.get.id.get"/>
          <div class="form-group">
            <label class="control-label">Please select a start time</label>
            @for( ts <- schedule.timeSlots ) {
              @if( ts.available) {
                <div class="radio">
                  <label>
                    <input type="radio" name="start_time" value="@ts.startTime.toString(Schedule.formatIso)"/>
                    @ts.startTime.toString(Schedule.formatTime)
                  </label>
                </div>
              } else {
                <div class="radio disabled">
                  <label>
                    <input type="radio" name="start_time" value="@ts.startTime.toString(Schedule.formatIso)" disabled="disabled"/>
                    @ts.startTime.toString(Schedule.formatTime)
                    </label>
                </div>
              }
            }
          </div>
          <div class="form-group">
            <label for="duration" class="control-label">... and a duration</label>
            <select name="duration" class="form-control">
              @for(i <- 1 to 3) {
                <option value="@i">@{ if (i == 1) s"$i hour" else s"$i hours" }</option>
              }
            </select>
          </div>
          <div class="form-group">
            <button class="btn btn-primary">Go</button>
          </div>
        </form>
      </div>
    </div>
  }
}
